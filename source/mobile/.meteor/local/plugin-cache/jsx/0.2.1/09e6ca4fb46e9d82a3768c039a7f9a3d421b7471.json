{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"/**\n * Created on 9/19/15.\n */\n\n{\n    (function () {\n\n        var AgreementWaiverPageStore = undefined;\n        Dependency.autorun(function () {\n            AgreementWaiverPageStore = Dependency.get('classRegister.AgreementWaiverPage.store');\n        });\n\n        Cal.CRRegBillingPage = React.createClass({\n            displayName: 'CRRegBillingPage',\n\n            mixins: [ReactMeteorData],\n            getMeteorData: function () {\n                Meteor.subscribe(\"activeShoppingCart\");\n\n                return {\n                    //当前的 ShoppingCart\n                    ShoppingCart: DB.ShoppingCart.findOne({\n                        status: 'active',\n                        type: 'register'\n                    }),\n                    hasNewSwimmer: AgreementWaiverPageStore.hasNewSwimmer.get()\n                };\n            },\n\n            //actions\n            'delete': function (shoppingCartItem) {\n\n                console.log(shoppingCartItem);\n\n                Meteor.call('delete_class_from_cart', {\n                    classId: shoppingCartItem.class1._id,\n                    swimmerId: shoppingCartItem.swimmer._id,\n                    cartId: this.data.ShoppingCart._id\n                }, function (err, result) {\n                    if (err) {\n                        console.error(err);\n                        return;\n                    }\n                });\n            },\n\n            //如果有new swimmer就 waiver form 否则 payment option\n            goToNextPage: function (e) {\n                e.preventDefault();\n\n                var hasNewSwimmer = this.data.hasNewSwimmer;\n\n                console.log('hasNewSwimmer', hasNewSwimmer);\n                if (hasNewSwimmer) {\n\n                    var href = '/classRegister/waiver';\n                    FlowRouter.go(href);\n                } else {\n                    var href = '/classRegister/paymentOptionsPage';\n\n                    FlowRouter.go(href);\n                }\n            },\n            render: function () {\n\n                var self = this;\n                var items = this.data.ShoppingCart && this.data.ShoppingCart.items;\n\n                if (!items || !items.length) return React.createElement(\n                    'div',\n                    { className: 'padding' },\n                    'you have not added item in shopping cart'\n                );\n\n                return React.createElement(\n                    'div',\n                    { className: 'padding' },\n                    React.createElement(\n                        'div',\n                        { className: 'row' },\n                        React.createElement(\n                            'div',\n                            { className: 'col' },\n                            'Student'\n                        ),\n                        React.createElement(\n                            'div',\n                            { className: 'col' },\n                            'Class'\n                        ),\n                        React.createElement(\n                            'div',\n                            { className: 'col' },\n                            'Amt'\n                        ),\n                        React.createElement('div', { className: 'col' })\n                    ),\n                    items.map(function (item, index, all) {\n\n                        return React.createElement(\n                            'div',\n                            { className: 'row', key: index },\n                            React.createElement(\n                                'div',\n                                { className: 'col' },\n                                item.swimmer.name\n                            ),\n                            React.createElement(\n                                'div',\n                                { className: 'col' },\n                                item.class1.name\n                            ),\n                            React.createElement(\n                                'div',\n                                { className: 'col' },\n                                item.class1.price\n                            ),\n                            !item.isBookTheSameTime ? React.createElement(\n                                'div',\n                                { className: 'col', onClick: self['delete'].bind(self, item) },\n                                'Delete'\n                            ) : React.createElement('div', { className: 'col' })\n                        );\n                    }),\n                    React.createElement('br', null),\n                    React.createElement('br', null),\n                    React.createElement(\n                        RC.Button,\n                        { name: 'button', type: 'submit',\n                            onClick: this.goToNextPage,\n                            theme: 'full', buttonColor: 'brand' },\n                        'Process To Checkout'\n                    )\n                );\n            }\n        });\n    })();\n}","ast":null,"map":{"version":3,"sources":["/client/app/class.register/RegBillingPage.jsx"],"names":[],"mappings":"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","file":"/client/app/class.register/RegBillingPage.jsx.map","sourcesContent":["/**\n * Created on 9/19/15.\n */\n\n{\n\n    let AgreementWaiverPageStore;\n    Dependency.autorun(function () {\n        AgreementWaiverPageStore = Dependency.get('classRegister.AgreementWaiverPage.store');\n    });\n\n\n    Cal.CRRegBillingPage = React.createClass({\n\n        mixins: [ReactMeteorData],\n        getMeteorData() {\n            Meteor.subscribe(\"activeShoppingCart\");\n\n            return {\n                //当前的 ShoppingCart\n                ShoppingCart: DB.ShoppingCart.findOne({\n                    status:'active',\n                    type:'register'\n                }),\n                hasNewSwimmer:AgreementWaiverPageStore.hasNewSwimmer.get()\n            }\n        },\n\n        //actions\n        delete(shoppingCartItem){\n\n            console.log(shoppingCartItem)\n\n            Meteor.call('delete_class_from_cart',{\n                classId :shoppingCartItem.class1._id,\n                swimmerId :shoppingCartItem.swimmer._id,\n                cartId:this.data.ShoppingCart._id\n            },function(err, result){\n                if(err){\n                    console.error(err)\n                    return;\n                }\n\n            })\n\n        },\n\n        //如果有new swimmer就 waiver form 否则 payment option\n        goToNextPage(e){\n            e.preventDefault();\n\n            var hasNewSwimmer= this.data.hasNewSwimmer\n\n            console.log('hasNewSwimmer', hasNewSwimmer)\n            if(hasNewSwimmer){\n\n                let href= '/classRegister/waiver'\n                FlowRouter.go(href);\n\n            }else{\n                let href= '/classRegister/paymentOptionsPage'\n\n                FlowRouter.go(href);\n\n            }\n\n        },\n        render() {\n\n            var self = this;\n            let items = this.data.ShoppingCart && this.data.ShoppingCart.items\n\n\n            if (!items || !items.length) return <div className=\"padding\">\n                you have not added item in shopping cart\n            </div>;\n\n            return <div className=\"padding\">\n                <div className=\"row\">\n                    <div className=\"col\">Student</div>\n                    <div className=\"col\">Class</div>\n                    <div className=\"col\">Amt</div>\n                    <div className=\"col\"></div>\n                </div>\n                {\n                    items.map(function (item, index, all) {\n\n                        return <div className=\"row\" key={index}>\n                            <div className=\"col\">{item.swimmer.name}</div>\n                            <div className=\"col\">{item.class1.name}</div>\n                            <div className=\"col\">{item.class1.price}</div>\n                            {\n                                !item.isBookTheSameTime?\n                                    <div className=\"col\" onClick={self.delete.bind(self,item)}>Delete</div>\n                                    :<div className=\"col\"></div>\n\n                            }\n\n                        </div>\n                    })\n\n\n                }\n\n                <br/><br/>\n                    <RC.Button name=\"button\" type=\"submit\"\n                               onClick={this.goToNextPage}\n                               theme=\"full\" buttonColor=\"brand\">\n                        Process To Checkout\n                    </RC.Button>\n\n\n            </div>\n        }\n    })\n\n}\n"]},"hash":"09e6ca4fb46e9d82a3768c039a7f9a3d421b7471"}
