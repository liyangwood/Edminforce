{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"/**\n * Created on 10/18/15.\n */\n\n{\n    //waiver form 判断及处理\n\n    Dependency.add('classRegister.AgreementWaiverPage.store', new function () {\n\n        var self = this;\n\n        self.getShoppingCart = function () {\n            return DB.ShoppingCart.findOne({\n                status: 'active',\n                type: 'register'\n            });\n        };\n\n        //是否包含第一次第一次注册的swimmer\n        self.hasNewSwimmer = new ReactiveVar(true);\n\n        self.swimmerIds = new ReactiveVar([]);\n\n        Meteor.startup(function () {\n\n            Tracker.autorun(function () {\n                var shoppingCart = self.getShoppingCart();\n\n                var items = shoppingCart && shoppingCart.items;\n\n                var hasNewSwimmer = _.some(items, function (item) {\n                    return item.isFistTime == true;\n                });\n                self.hasNewSwimmer.set(hasNewSwimmer);\n\n                var ids = _.map(items, function (item) {\n                    return item.swimmerId;\n                });\n                ids = _.uniq(ids);\n\n                self.swimmerIds.set(ids);\n\n                console.log('swimmerIds', ids);\n            });\n        });\n    }());\n}","ast":null,"map":{"version":3,"sources":["/client/app/class.register/AgreementWaiverPage.store.jsx"],"names":[],"mappings":";;;;AAKA;;;AAGI,cAAU,CAAC,GAAG,CAAC,yCAAyC,EAAE,IAAI,YAAY;;AAEtE,YAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,YAAI,CAAC,eAAe,GAAG,YAAY;AAC/B,mBAAO,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC;AAC3B,sBAAM,EAAE,QAAQ;AAChB,oBAAI,EAAE,UAAU;aACnB,CAAC,CAAA;SACL,CAAA;;;AAGD,YAAI,CAAC,aAAa,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAA;;AAE1C,YAAI,CAAC,UAAU,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAA;;AAGrC,cAAM,CAAC,OAAO,CAAC,YAAY;;AAEvB,mBAAO,CAAC,OAAO,CAAC,YAAY;AACxB,oBAAI,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAA;;AAEzC,oBAAI,KAAK,GAAG,YAAY,IAAI,YAAY,CAAC,KAAK,CAAC;;AAE/C,oBAAI,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;AAC9C,2BAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC;iBAClC,CAAC,CAAA;AACF,oBAAI,CAAC,aAAa,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;;AAGrC,oBAAI,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;AACnC,2BAAO,IAAI,CAAC,SAAS,CAAA;iBACxB,CAAC,CAAA;AACF,mBAAG,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAElB,oBAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;;AAGxB,uBAAO,CAAC,GAAG,CAAC,YAAY,EAAC,GAAG,CAAC,CAAA;aAChC,CAAC,CAAA;SAEL,CAAC,CAAA;KAGL,EAAA,CAAC,CAAA;CAEL","file":"/client/app/class.register/AgreementWaiverPage.store.jsx.map","sourcesContent":["/**\n * Created on 10/18/15.\n */\n\n\n{\n    //waiver form 判断及处理\n\n    Dependency.add('classRegister.AgreementWaiverPage.store', new function () {\n\n        var self = this;\n\n        self.getShoppingCart = function () {\n            return DB.ShoppingCart.findOne({\n                status: 'active',\n                type: 'register'\n            })\n        }\n\n        //是否包含第一次第一次注册的swimmer\n        self.hasNewSwimmer = new ReactiveVar(true)\n\n        self.swimmerIds = new ReactiveVar([])\n\n\n        Meteor.startup(function () {\n\n            Tracker.autorun(function () {\n                var shoppingCart = self.getShoppingCart()\n\n                var items = shoppingCart && shoppingCart.items;\n\n                var hasNewSwimmer = _.some(items, function (item) {\n                    return item.isFistTime == true;\n                })\n                self.hasNewSwimmer.set(hasNewSwimmer)\n\n\n                var ids = _.map(items, function (item) {\n                    return item.swimmerId\n                })\n                ids = _.uniq(ids);\n\n                self.swimmerIds.set(ids)\n\n\n                console.log('swimmerIds',ids)\n            })\n\n        })\n\n\n    })\n\n}\n"]},"hash":"d776e22ca6601f422a5ce5a4a1baa67b1bd714fa"}
