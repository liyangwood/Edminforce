{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"var themes = [\"overlay-light\", \"overlay-dark\"];\nCal.ResetPasswordEmail = React.createClass({\n\tdisplayName: \"ResetPasswordEmail\",\n\n\tmixins: [RC.Mixins.Theme],\n\tthemeGroup: \"ih-login\",\n\tthemeDefault: \"overlay-dark\",\n\tthemes: themes,\n\n\tpropTypes: {\n\t\tuserToken: React.PropTypes.string\n\t},\n\n\tgetInitialState: function () {\n\t\treturn {\n\t\t\tbuttonActive: false,\n\t\t\twaiting: false,\n\t\t\tmsg: null\n\t\t};\n\t},\n\n\tclearForm: function () {\n\t\tthis.refs.newPw.reset();\n\t\tthis.refs.newPwRepeat.reset();\n\t\tthis.setState({\n\t\t\tmsg: null,\n\t\t\twaiting: false });\n\t},\n\n\treset: function (e) {\n\t\tdebugger;\n\t\te.preventDefault();\n\t\tif (this.state.msg) return null;\n\t\tvar self = this;\n\t\tvar form = this.refs.resetForm.getFormData();\n\n\t\tif (form.pw == form.pwRepeat) {\n\t\t\tif (!App.checkPassword(form.pw)) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tmsg: \"Password shoud have at least 8 characters, containing Capital Letts AND Numbers.\",\n\t\t\t\t\twaiting: false\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t// Reset Account Password using token\n\t\t\tthis.setState({ waiting: true });\n\t\t\tAccounts.resetPassword(this.props.userToken, form.pw, function (err) {\n\t\t\t\tvar passedMsg = err && err.error ? ph.errorMsgs[err.error] || err.reason : React.createElement(\n\t\t\t\t\t\"p\",\n\t\t\t\t\tnull,\n\t\t\t\t\t\"Thank you for registering!\"\n\t\t\t\t);\n\t\t\t\tif (!err) {\n\t\t\t\t\tself.clearForm();\n\t\t\t\t\tDispatcher.dispatch({\n\t\t\t\t\t\tactionType: \"AUTH_RESET_SUCCESS\"\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tself.setState({\n\t\t\t\t\tmsg: passedMsg\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({ msg: \"Your passwords did not match, please try again.\" });\n\t\t\tthis.setState({ waiting: false });\n\t\t}\n\t},\n\n\tdebuggerHelper: function () {\n\t\tdebugger;\n\t},\n\n\tprintMsg: function () {\n\t\tconsole.log(\"printMsg is called\");\n\t\tvar currentMessages = this.state.msg ? [this.state.msg] : [];\n\t\treturn React.createElement(\n\t\t\t\"div\",\n\t\t\tnull,\n\t\t\tcurrentMessages.map(function (m, n) {\n\t\t\t\treturn React.createElement(\n\t\t\t\t\t\"div\",\n\t\t\t\t\t{ className: \"center\", key: n },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t{ className: \"bigger inline-block invis-70 red\" },\n\t\t\t\t\t\t_.isString(m) ? React.createElement(\n\t\t\t\t\t\t\t\"div\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tm\n\t\t\t\t\t\t) : m\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t},\n\n\tcheckButtonState: function (e) {\n\t\tvar form = this.refs.resetForm.getFormData();\n\t\tvar test = _.every(_.values(form), function (t) {\n\t\t\treturn t.length && t.length > 0;\n\t\t});\n\t\tvar pwMatch = form.pw == form.pwRepeat;\n\t\tif (test && pwMatch) {\n\t\t\tthis.setState({ msg: null, waiting: false, buttonActive: true });\n\t\t} else if (test && !pwMatch) {\n\t\t\tthis.setState({\n\t\t\t\tmsg: \"Your passwords did not match, please try again.\",\n\t\t\t\twaiting: false,\n\t\t\t\tbuttonActive: false });\n\t\t} else {\n\t\t\tthis.setState({ buttonActive: false });\n\t\t}\n\t},\n\n\trender: function () {\n\t\tdebugger;\n\t\tvar inputTheme = \"small-label\";\n\t\tvar buttonTheme = \"full\";\n\t\tif (_.contains([\"overlay-light\", \"overlay-dark\"], this.props.theme)) {\n\t\t\tinputTheme += \",\" + this.props.theme;\n\t\t\tbuttonTheme += \",\" + this.props.theme;\n\t\t}\n\t\treturn React.createElement(\n\t\t\t\"div\",\n\t\t\tnull,\n\t\t\tReact.createElement(\n\t\t\t\tRC.Form,\n\t\t\t\t{ onSubmit: this.reset, onKeyUp: this.checkButtonState, ref: \"resetForm\" },\n\t\t\t\tReact.createElement(RC.Input, { name: \"pw\", label: \"Password\", type: \"password\", theme: inputTheme, ref: \"newPw\" }),\n\t\t\t\tReact.createElement(RC.Input, { name: \"pwRepeat\", label: \"Repeat Password\", type: \"password\", theme: inputTheme, ref: \"newPwRepeat\" }),\n\t\t\t\tthis.printMsg(),\n\t\t\t\tReact.createElement(\n\t\t\t\t\tRC.Button,\n\t\t\t\t\t{ name: \"button\", active: this.state.buttonActive, theme: buttonTheme, disabled: this.state.waiting },\n\t\t\t\t\tthis.state.waiting ? React.createElement(RC.uiIcon, { uiClass: \"circle-o-notch spin-slow\" }) : \"Reset Password\"\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});","ast":null,"map":{"version":3,"sources":["/client/app/auth/resetPassword.jsx"],"names":[],"mappings":"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","file":"/client/app/auth/resetPassword.jsx.map","sourcesContent":["let themes = [\"overlay-light\",\"overlay-dark\"]\nCal.ResetPasswordEmail = React.createClass({\n\n\tmixins: [RC.Mixins.Theme],\n\tthemeGroup: \"ih-login\",\n\tthemeDefault: \"overlay-dark\",\n\tthemes: themes,\n\n\tpropTypes: {\n\t\tuserToken: React.PropTypes.string\n\t},\n\n\tgetInitialState() {\n\t\treturn {\n\t\t\tbuttonActive: false,\n\t\t\twaiting: false,\n\t\t\tmsg: null,\n\t\t}\n\t},\n\n\tclearForm(){\n\t\tthis.refs.newPw.reset()\n\t\tthis.refs.newPwRepeat.reset()\n\t\tthis.setState({ \n\t\t\tmsg: null,\n\t\t\twaiting: false })\n\t},\n\n\treset(e){\n\t\tdebugger\n\t\te.preventDefault()\n\t\tif (this.state.msg) return null\n\t\tlet self = this\n\t\tlet form = this.refs.resetForm.getFormData()\n\n\t\tif (form.pw == form.pwRepeat) {\n\t\t\tif (!App.checkPassword(form.pw)) {\n\t\t\t\tthis.setState({\n          \t\t\tmsg: \"Password shoud have at least 8 characters, containing Capital Letts AND Numbers.\",\n          \t\t\twaiting: false\n        \t\t})\n        \t\treturn\n\t\t\t};\n\t      \t// Reset Account Password using token\n\t      \tthis.setState({ waiting: true })\n\t      \tAccounts.resetPassword(\n\t      \tthis.props.userToken,\n\t      \tform.pw,\n\t      \tfunction(err) {\n\t\t      \tlet passedMsg = err && err.error\n\t\t      \t\t? (ph.errorMsgs[err.error] || err.reason)\n\t\t      \t\t: <p>Thank you for registering!</p>\n\t\t      \tif (!err) {\n\t\t      \t\tself.clearForm()\n\t\t      \t\tDispatcher.dispatch({\n\t\t        \t\tactionType: \"AUTH_RESET_SUCCESS\"\n\t\t        \t});\n\t\t        \treturn;\n\t\t      \t}\n\t\t        self.setState({\n\t\t        \tmsg: passedMsg\n\t\t        })\n\t    \t})\n\t  \t} else { \n\t  \t\tthis.setState({ msg: \"Your passwords did not match, please try again.\" })\n\t  \t\tthis.setState({ waiting: false })\n\t  \t}\n\t},\n\n\tdebuggerHelper(){\n\t\tdebugger\n\t},\n\n\tprintMsg(){\n\t\tconsole.log(\"printMsg is called\")\n\t\tlet currentMessages = this.state.msg ? [this.state.msg] : []\n\t\treturn <div>\n\t\t\t{\n\t\t\t\tcurrentMessages.map(function(m,n){\n\t\t\t\t\treturn <div className=\"center\" key={n}>\n\t\t\t\t             \t<div className=\"bigger inline-block invis-70 red\">\n\t\t\t\t             \t\t{_.isString(m) ? <div>{m}</div> : m}\n\t\t\t\t             \t</div>\n\t\t\t            \t</div>\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t},\n\n\tcheckButtonState(e){\n\t\tvar form = this.refs.resetForm.getFormData()\n\t\tlet test = _.every( _.values(form), function(t){\n\t\t\treturn t.length && t.length>0\n\t\t})\n\t\tlet pwMatch = form.pw == form.pwRepeat\n\t\tif (test && pwMatch) {\n\t\t\tthis.setState({ msg: null, waiting: false, buttonActive: true})\n\t\t} else if (test && !pwMatch) {\n\t\t\tthis.setState({ \n\t\t\t\tmsg: \"Your passwords did not match, please try again.\", \n\t\t\t\twaiting: false, \n\t\t\t\tbuttonActive: false})\n\t\t} else {\n\t\t\tthis.setState({ buttonActive: false })\n\t\t}\n\t},\n\n\trender: function() {\n\t\tdebugger\n\t\tvar inputTheme = \"small-label\"\n    \tvar buttonTheme = \"full\"\n\t\tif (_.contains([\"overlay-light\",\"overlay-dark\"], this.props.theme)) {\n      \t\tinputTheme += \",\"+this.props.theme\n      \t\tbuttonTheme += \",\"+this.props.theme\n    \t}\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<RC.Form onSubmit={this.reset} onKeyUp={this.checkButtonState} ref=\"resetForm\">\n\t\t\t\t<RC.Input name=\"pw\" label=\"Password\" type=\"password\" theme={inputTheme} ref=\"newPw\" />\n\t\t\t\t<RC.Input name=\"pwRepeat\" label=\"Repeat Password\" type=\"password\" theme={inputTheme} ref=\"newPwRepeat\" />\n\t\t\t\t{this.printMsg()}\n\t\t\t\t<RC.Button name=\"button\" active={this.state.buttonActive} theme={buttonTheme} disabled={this.state.waiting}>\n\t\t\t\t\t{this.state.waiting ? <RC.uiIcon uiClass=\"circle-o-notch spin-slow\" /> : \"Reset Password\"}\n\t\t\t\t</RC.Button>\n\t\t\t\t</RC.Form>\n\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n}); "]},"hash":"70845bc11ff4c2a0771bb1cc6fbcba0fe50e22a6"}
